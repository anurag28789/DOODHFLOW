{% extends "base.html" %}
{% block title %}Customer Dashboard{% endblock %}
{% block content %}

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet"/>

<style>
    body {
        background-color: #f8fafc;
    }

    .profile-header {
        background: linear-gradient(45deg, #0d6efd, #6c757d);
        color: #fff;
        padding: 2rem;
        border-radius: 0.75rem;
        margin-bottom: 2rem;
    }

    .profile-header h1 {
        font-weight: 700;
    }

    .profile-meta span {
        display: inline-flex;
        align-items: center;
        margin-right: 1.5rem;
        opacity: 0.9;
    }

    .profile-meta .badge {
        font-size: 0.9em;
    }

    .stat-card {
        background-color: #fff;
        border: 1px solid #dee2e6;
        border-radius: 0.75rem;
        padding: 1.5rem;
        text-align: center;
        height: 100%;
        transition: all 0.2s ease-in-out;
    }
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.08);
    }
    .stat-card .stat-icon {
        font-size: 2rem;
        margin-bottom: 0.75rem;
        color: #0d6efd;
    }
    .stat-card .card-title {
        color: #6c757d;
        font-size: 0.9rem;
        text-transform: uppercase;
        font-weight: 500;
    }
    .stat-card .stat-value {
        font-size: 2.25rem;
        font-weight: 700;
    }
    .action-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 1.5rem;
        border-radius: 0.75rem;
        background-color: #fff;
        border: 1px solid #e9ecef;
        color: #212529;
        text-decoration: none;
        transition: all 0.2s ease-in-out;
        height: 100%;
    }
    .action-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        color: #0d6efd;
    }
    .action-card .action-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        color: #0d6efd;
    }
    .action-card .action-title {
        font-weight: 500;
    }
</style>

<div class="container mt-4">
    <div class="profile-header">
        <h1 class="mb-1">Dashboard</h1>
        <p class="lead">Welcome back, {{ profile.name }}!</p>
        <div class="profile-meta d-flex flex-wrap mt-3">
            <span><i class="fas fa-phone-alt me-2"></i>{{ profile.phone }}</span>
            <span><i class="fas fa-map-marker-alt me-2"></i>{{ profile.address }}</span>
            <span>
                {% if profile.active %}
                    <span class="badge bg-light text-dark"><i class="fas fa-check-circle text-success me-1"></i> Active</span>
                {% else %}
                    <span class="badge bg-light text-dark"><i class="fas fa-times-circle text-danger me-1"></i> Inactive</span>
                {% endif %}
            </span>
        </div>
    </div>

    <div class="row g-4 mb-4">
        <div class="col-md-6">
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-shopping-cart"></i></div>
                <h5 class="card-title">Today's Supply</h5>
                <p class="stat-value">{{ "%.2f"|format(today_supply) }} L</p>
            </div>
        </div>
        <div class="col-md-6">
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-file-invoice-dollar"></i></div>
                <h5 class="card-title">Due This Month</h5>
                <p class="stat-value">â‚¹{{ "%.2f"|format(due_this_month) }}</p>
            </div>
        </div>
    </div>

    <h4 class="mb-3">Actions</h4>
    <div class="row g-3">
        <div class="col-md-4">
            <a href="{{ url_for('customer_order_history_view') }}" class="action-card">
                <div class="action-icon"><i class="fas fa-history"></i></div>
                <div class="action-title">Order History</div>
            </a>
        </div>
        <div class="col-md-4">
            <a href="{{ url_for('customer_announcements') }}" class="action-card">
                <div class="action-icon"><i class="fas fa-bullhorn"></i></div>
                <div class="action-title">Announcements</div>
            </a>
        </div>
        <div class="col-md-4">
            <a href="{{ url_for('customer_contact_milkman') }}" class="action-card">
                <div class="action-icon"><i class="fas fa-comments"></i></div>
                <div class="action-title">Contact Milkman</div>
            </a>
        </div>
    </div>
    <div class="row g-3 mt-3">
        <div class="col-md-4">
            <a href="{{ url_for('customer_profile') }}" class="action-card">
                <div class="action-icon"><i class="fas fa-user-edit"></i></div>
                <span class="action-title">Edit Profile</span>
            </a>
        </div>
        <div class="col-md-4">
            <a href="{{ url_for('customer_report_issue') }}" class="action-card">
                <div class="action-icon"><i class="fas fa-exclamation-triangle"></i></div>
                <span class="action-title">Report Issue</span>
            </a>
        </div>
    </div>
</div>
{% endblock %}