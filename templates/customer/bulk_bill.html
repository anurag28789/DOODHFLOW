{% extends "base.html" %}
{% block title %}Bulk Bill{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>Billing for {{ customer.name }}</h2>
    {% if requirements %}
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Date</th>
                <th>Session</th>
                <th>Cow Qty (L)</th>
                <th>Buffalo Qty (L)</th>
                <th>Rate (Cow)</th>
                <th>Rate (Buffalo)</th>
                <th>Amount</th>
            </tr>
        </thead>
        <tbody>
            {% for r in requirements %}
            <tr>
                <td>{{ r.date_requested.strftime('%d-%b-%Y') }}</td>
                <td>{{ r.session.title() }}</td>
                <td>{{ r.cow_qty }}</td>
                <td>{{ r.buffalo_qty }}</td>
                <td>₹{{ r.cow_rate_at_order }}</td>
                <td>₹{{ r.buffalo_rate_at_order }}</td>
                <td>₹{{ (r.cow_qty * r.cow_rate_at_order) + (r.buffalo_qty * r.buffalo_rate_at_order) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h4>Total Amount: ₹{{ total_amount }}</h4>
    {% else %}
    <p>No billable items.</p>
    {% endif %}
</div>
{% endblock %}
